{"version":3,"sources":["images/laptop.png","functions/user.js","components/cards/ProductCardInCheckout.js","pages/Cart.js"],"names":["module","exports","userCart","cart","authtoken","a","axios","post","process","headers","getUserCart","get","emptyUserCart","delete","saveUserAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","getWishlist","removeWishlist","productId","put","addToWishlist","ProductCardInCheckout","p","dispatch","useDispatch","style","width","height","images","length","small","url","large","laptop","title","price","brand","onChange","e","console","log","target","value","window","localStorage","getItem","JSON","parse","map","product","i","_id","color","setItem","stringify","type","payload","name","className","filter","c","key","count","quantity","toast","error","shipping","CheckCircleOutlined","CloseCircleOutlined","CloseOutlined","onClick","splice","Cart","history","useSelector","state","user","scope","to","reduce","currentValue","nextValue","token","then","res","data","ok","push","catch","err","disabled","pathname","from"],"mappings":"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","file":"static/js/37.20a856c9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/laptop.f51f9ca6.png\";","import axios from \"axios\";\n\nexport const userCart = async (cart, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/cart`,\n    { cart },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const getUserCart = async (authtoken) =>\n  await axios.get(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const emptyUserCart = async (authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const saveUserAddress = async (authtoken, address) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/address`,\n    { address },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const applyCoupon = async (authtoken, coupon) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/cart/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const createOrder = async (stripeResponse, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/order`,\n    { stripeResponse },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const getUserOrders = async (authtoken) =>\n  await axios.get(`${process.env.REACT_APP_API}/user/orders`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const getWishlist = async (authtoken) =>\n  await axios.get(`${process.env.REACT_APP_API}/user/wishlist`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const removeWishlist = async (productId, authtoken) =>\n  await axios.put(\n    `${process.env.REACT_APP_API}/user/wishlist/${productId}`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const addToWishlist = async (productId, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/wishlist`,\n    { productId },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n","import React from \"react\";\nimport ModalImage from \"react-modal-image\";\nimport laptop from \"../../images/laptop.png\";\nimport { useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  CheckCircleOutlined,\n  CloseCircleOutlined,\n  CloseOutlined,\n} from \"@ant-design/icons\";\n\nconst ProductCardInCheckout = ({ p }) => {\n  const colors = [\"Black\",  \"White\"];\n  let dispatch = useDispatch();\n\n  const handleColorChange = (e) => {\n    console.log(\"color changed\", e.target.value);\n\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart[i].color = e.target.value;\n        }\n      });\n\n      //  console.log('cart udpate color', cart)\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleQuantityChange = (e) => {\n    // console.log(\"available quantity\", p.quantity);\n    let count = e.target.value < 1 ? 1 : e.target.value;\n\n    if (count > p.quantity) {\n      toast.error(`Max available quantity: ${p.quantity}`);\n      return;\n    }\n\n    let cart = [];\n\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n\n      cart.map((product, i) => {\n        if (product._id == p._id) {\n          cart[i].count = count;\n        }\n      });\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleRemove = () => {\n    // console.log(p._id, \"to remove\");\n    let cart = [];\n\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      // [1,2,3,4,5]\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart.splice(i, 1);\n        }\n      });\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  return (\n    <tbody>\n      <tr>\n        <td>\n          <div style={{ width: \"100px\", height: \"auto\" }}>\n            {p.images.length ? (\n              <ModalImage small={p.images[0].url} large={p.images[0].url} />\n            ) : (\n              <ModalImage small={laptop} large={laptop} />\n            )}\n          </div>\n        </td>\n        <td>{p.title}</td>\n        <td>${p.price}</td>\n        <td>{p.brand}</td>\n        <td>\n          <select\n            onChange={handleColorChange}\n            name=\"color\"\n            className=\"form-control\"\n          >\n            {p.color ? (\n              <option value={p.color}>{p.color}</option>\n            ) : (\n              <option>Select</option>\n            )}\n            {colors\n              .filter((c) => c !== p.color)\n              .map((c) => (\n                <option key={c} value={c}>\n                  {c}\n                </option>\n              ))}\n          </select>\n        </td>\n        <td className=\"text-center\">\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            value={p.count}\n            onChange={handleQuantityChange}\n          />\n        </td>\n        <td className=\"text-center\">\n          {p.shipping === \"Yes\" ? (\n            <CheckCircleOutlined className=\"text-success\" />\n          ) : (\n            <CloseCircleOutlined className=\"text-danger\" />\n          )}\n        </td>\n        <td className=\"text-center\">\n          <CloseOutlined\n            onClick={handleRemove}\n            className=\"text-danger pointer\"\n          />\n        </td>\n      </tr>\n    </tbody>\n  );\n};\n\nexport default ProductCardInCheckout;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport ProductCardInCheckout from \"../components/cards/ProductCardInCheckout\";\nimport { userCart } from \"../functions/user\";\n\nconst Cart = ({ history }) => {\n  const { cart, user } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  const getTotal = () => {\n    return cart.reduce((currentValue, nextValue) => {\n      return currentValue + nextValue.count * nextValue.price;\n    }, 0);\n  };\n\n  const saveOrderToDb = () => {\n    // console.log(\"cart\", JSON.stringify(cart, null, 4));\n    userCart(cart, user.token)\n      .then((res) => {\n        console.log(\"CART POST RES\", res);\n        if (res.data.ok) history.push(\"/checkout\");\n      })\n      .catch((err) => console.log(\"cart save err\", err));\n  };\n\n  const showCartItems = () => (\n    <table className=\"table table-bordered\">\n      <thead className=\"thead-light\">\n        <tr>\n          <th scope=\"col\">Image</th>\n          <th scope=\"col\">Title</th>\n          <th scope=\"col\">Price</th>\n          <th scope=\"col\">Brand</th>\n          <th scope=\"col\">Color</th>\n          <th scope=\"col\">Count</th>\n          <th scope=\"col\">Shipping</th>\n          <th scope=\"col\">Remove</th>\n        </tr>\n      </thead>\n\n      {cart.map((p) => (\n        <ProductCardInCheckout key={p._id} p={p} />\n      ))}\n    </table>\n  );\n\n  return (\n    <div className=\"container-fluid pt-2\">\n      <div className=\"row\">\n        <div className=\"col-md-8\">\n          <h4>Cart / {cart.length} Product</h4>\n\n          {!cart.length ? (\n            <p>\n              No products in cart. <Link to=\"/shop\">Continue Shopping.</Link>\n            </p>\n          ) : (\n            showCartItems()\n          )}\n        </div>\n        <div className=\"col-md-4\">\n          <h4>Order Summary</h4>\n          <hr />\n          <p>Products</p>\n          {cart.map((c, i) => (\n            <div key={i}>\n              <p>\n                {c.title} x {c.count} = ${c.price * c.count}\n              </p>\n            </div>\n          ))}\n          <hr />\n          Total: <b>${getTotal()}</b>\n          <hr />\n          {user ? (\n            <button\n              onClick={saveOrderToDb}\n              className=\"btn btn-sm btn-primary mt-2\"\n              disabled={!cart.length}\n            >\n              Proceed to Checkout\n            </button>\n          ) : (\n            <button className=\"btn btn-sm btn-primary mt-2\">\n              <Link\n                to={{\n                  pathname: \"/login\",\n                  state: { from: \"cart\" },\n                }}\n              >\n                Login to Checkout\n              </Link>\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"sourceRoot":""}